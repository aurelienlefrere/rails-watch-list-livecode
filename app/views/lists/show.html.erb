<div class="position-relative">
  <%# VU RAPIDEMENT PENDANT LE LIVE-CODE ""image_path""-> https://kitt.lewagon.com/knowledge/cheatsheets/rails_image_helpers %>
  <div class="card-category card-large" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url(<%= cl_image_path @list.photo.key, height: 300, width: 400, crop: :fill if @list.photo.attached? %>)">
    <h1>
      <%= @list.name %>
    </h1>
  </div>
</div>
<div class="container mb-5">
  <div class="d-flex justify-content-between my-4">

      <%= link_to "Ajouter un film", new_list_bookmark_path(@list), class: "btn btn-light"  %>
      <%= link_to "Supprimer ma liste - A FAIRE", list_path(@list), class: 'btn btn-chetiflor', data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to remove your #{@list.name}?"} %>

  </div>
  <div class="row my-2">
    <%# Le ""List has_many :movies, through: :bookmarks"" dans le model nous permet de chainer : @list.movies %>
    <% @list.movies.each do |movie| %>

    <%# TRES IMPORTANT ICI ET NON VU DANS LE LIVECODE  %>
    <%# On a besoin de ""bookmark"" pour afficher le commentaire ligne 37. Pour le trouver, on cherche avec les 2 id (list et movie)  %>
    <%# Rappel, ""bookmark"" a 2 id, donc le find ne fonctionnera pas, on utilise donc find_by  %>
       <% bookmark = Bookmark.find_by(list: @list, movie: movie) %>

      <%# Ici, faire le design de la card : %>
      <%# Pleins de designs :
      - https://uikit.lewagon.com/documentation#card_category
      - https://getbootstrap.com/docs/5.3/components/card/
      - https://dribbble.com/tags/cards
      - https://www.figma.com/fr-fr/communaute/file/1097964499926853798/100-card-design-templates-ui-kit
      - etc %>
      <div class="">
        <%= movie.title %> - <%= movie.rating %>
        <p>
          <%= movie.overview %>
        </p>
        <span><%= bookmark.comment %></span>
        <%= link_to "delete - A FAIRE", bookmark_path(bookmark), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to remove #{movie.title} from your #{@list.name} list"}, class: 'text-danger' %>
      </div>
      <% end %>
  </div>

  <hr class="my-5">

</div>
